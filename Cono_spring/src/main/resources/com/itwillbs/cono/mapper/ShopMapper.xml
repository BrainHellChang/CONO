<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itwillbs.cono.mapper.ShopMapper">
	
	<!-- 내 상점 정보 조회 -->
	<select id="selectMyShop" resultType="com.itwillbs.cono.vo.ShopDTO">
		SELECT * FROM shop WHERE member_id=#{member_id}
	</select>
	
	<!-- 내 상점 판매 횟수 조회 -->
	<select id="selectShopSellCnt" resultType="java.lang.String">
		SELECT COUNT(*) sellCount 
		FROM item it, shop s 
		WHERE s.member_id = #{member_id} AND item_status = 'Y'
	</select>
	
	<!-- 내 상점 상품 개수 조회 -->
	<select id="selectShopItemCnt" resultType="java.lang.String">
		SELECT COUNT(*) itemCount
		FROM item it, shop s 
		WHERE s.member_id = #{member_id}
	</select>
	
	<insert id="insertItem">
		INSERT INTO item
		VALUES (#{item.item_idx}, (SELECT shop_idx FROM shop WHERE member_id=#{member_id})
		,#{item.item_title}, #{item.item_content}, #{item.item_price}, '', '0', 'N', 'N', '0', #{item.item_region}, #{item.item_quantity})
	</insert>
	
	<insert id="insertCategory">
		INSERT INTO category VALUES (#{category.category_big},#{category.category_small},#{item.item_idx},'0')
	</insert>
</mapper>

